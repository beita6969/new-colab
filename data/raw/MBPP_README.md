# MBPP数据集下载报告

**下载时间**: 2024年11月24日
**下载位置**: `/home/yijia/.claude/11/integrated_aflow_roll/data/raw`

## 数据集概览

### 1. MBPP (Mostly Basic Python Problems) 原版

**总样本数**: 974个
**难度**: 入门到中等
**任务类型**: Python函数编写

#### 数据分布

| Split | 样本数 | 文件名 | 大小 |
|-------|--------|--------|------|
| Train | 374 | `mbpp_train.json` | 229 KB |
| Test | 500 | `mbpp_test.json` | 314 KB |
| Validation | 90 | `mbpp_validation.json` | 55 KB |
| Prompt | 10 | `mbpp_prompt.json` | 5.9 KB |
| **全部** | **974** | `mbpp_full.json` | **624 KB** |

#### 数据格式

```json
{
  "task_id": 601,
  "text": "Write a function to find the longest chain...",
  "code": "class Pair(object): ...",
  "test_list": [
    "assert max_chain_length(...) == 3",
    "assert max_chain_length(...) == 4",
    "assert max_chain_length(...) == 5"
  ],
  "test_setup_code": "",
  "challenge_test_list": [],
  "split": "train"
}
```

**关键字段说明**:
- `task_id`: 任务ID
- `text`: 问题描述（自然语言）
- `code`: 参考代码实现
- `test_list`: 测试用例列表（平均3个/题）
- `test_setup_code`: 测试设置代码
- `split`: 数据集划分（train/test/validation/prompt）

---

### 2. MBPP+ (EvalPlus增强版)

**总样本数**: 378个
**难度**: 入门到中等（与MBPP相同）
**测试用例**: **35倍增强**（从3个增加到约100+个）

#### 数据分布

| Split | 样本数 | 文件名 | 大小 |
|-------|--------|--------|------|
| Test | 378 | `mbpp_plus_test.json` | 4.7 MB |
| **全部** | **378** | `mbpp_plus_full.json` | **4.7 MB** |

#### 数据格式

```json
{
  "task_id": 2,
  "text": "Write a function to find similar elements...",
  "test_list": [
    "assert set(similar_elements((3, 4, 5, 6),(5, 7, 4, 10))) == set((4, 5))",
    "assert set(similar_elements((1, 2, 3, 4),(5, 4, 3, 7))) == set((3, 4))",
    // ... 约100+个测试用例
  ],
  "code": "def similar_elements(test_tup1, test_tup2): ..."
}
```

**关键特点**:
- 测试用例从3个增加到100+个
- 覆盖更多边界情况和特殊场景
- 更严格的评估标准（13-18%缺陷检测率提升）
- 被Meta Llama 3.3、Qwen2.5-Coder等顶级模型使用

---

## 对比总结

| 特性 | MBPP原版 | MBPP+ |
|------|----------|-------|
| 样本数量 | 974 | 378 |
| 测试用例/题 | ~3个 | ~100+个 |
| 文件大小 | 624 KB | 4.7 MB |
| 测试覆盖率 | 标准 | 35倍增强 |
| 适用场景 | 训练+评估 | 严格评估 |
| GRPO训练 | ✅ 非常适合 | ✅✅ 优秀选择 |

---

## 使用建议

### 方案1: 大规模训练
使用 **MBPP原版 (974题)**
- 样本量最大
- 覆盖面最广
- 适合初期训练

### 方案2: 高质量训练
使用 **MBPP+ (378题)**
- 测试用例最丰富
- 奖励信号最精确
- 适合精细化训练

### 方案3: 混合训练（推荐）
- **训练阶段**: 使用MBPP原版（974题）进行大规模训练
- **评估阶段**: 使用MBPP+（378题）进行严格评估
- **优势**: 兼顾数量和质量

---

## 集成到项目

### 数据加载示例

```python
import json

# 加载MBPP训练集
with open('/home/yijia/.claude/11/integrated_aflow_roll/data/raw/mbpp_train.json', 'r') as f:
    mbpp_train = json.load(f)

# 加载MBPP+测试集
with open('/home/yijia/.claude/11/integrated_aflow_roll/data/raw/mbpp_plus_test.json', 'r') as f:
    mbpp_plus_test = json.load(f)

print(f"MBPP训练集: {len(mbpp_train)} 题")
print(f"MBPP+测试集: {len(mbpp_plus_test)} 题")
```

### 下一步工作

1. **修改数据加载代码** (`data.py`)
   - 添加MBPP数据加载器
   - 统一数据格式

2. **更新奖励计算** (`reward.py`)
   - 添加MBPP测试用例执行逻辑
   - 支持MBPP+的多测试用例评估

3. **配置训练参数** (`config/`)
   - 添加MBPP数据集选项
   - 设置数据集混合比例

4. **运行基线实验**
   - 在MBPP上训练模型
   - 在MBPP+上评估性能

---

## 文件清单

```
/home/yijia/.claude/11/integrated_aflow_roll/data/raw/
├── mbpp_full.json           # MBPP完整数据集 (974题)
├── mbpp_train.json          # MBPP训练集 (374题)
├── mbpp_test.json           # MBPP测试集 (500题)
├── mbpp_validation.json     # MBPP验证集 (90题)
├── mbpp_prompt.json         # MBPP提示集 (10题)
├── mbpp_plus_full.json      # MBPP+完整数据集 (378题)
├── mbpp_plus_test.json      # MBPP+测试集 (378题)
└── download_mbpp.py         # 下载脚本
```

---

## 数据来源

- **MBPP原版**: `mbpp` (HuggingFace Datasets)
- **MBPP+**: `evalplus/mbppplus` (HuggingFace Datasets)
- **论文**:
  - MBPP: "Program Synthesis with Large Language Models" (Google Research)
  - EvalPlus: "Is Your Code Generated by ChatGPT Really Correct?" (NeurIPS 2023)

---

## 数据质量保证

✅ 所有数据集均通过完整性验证
✅ 样本数量与官方一致
✅ 数据格式正确
✅ 测试用例可执行

**下载完成时间**: 2024-11-24 22:36
